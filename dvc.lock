schema: '2.0'
stages:
  get_data:
    cmd: python scripts/data.py
    deps:
    - path: scripts/data.py
      hash: md5
      md5: 1f8b2a54484b92b03cd8ae6b49539586
      size: 1524
    params:
      params.yaml:
        index_col: customer_id
    outs:
    - path: data/initial_data.csv
      hash: md5
      md5: 9fe1f5092eca5901bcb7570bd1d6cfa8
      size: 820789
      cloud:
        my_storage:
          etag: 9fe1f5092eca5901bcb7570bd1d6cfa8
          version_id: '00061595888061E1'
  fit_model:
    cmd: python scripts/fit.py
    deps:
    - path: data/initial_data.csv
      hash: md5
      md5: 9fe1f5092eca5901bcb7570bd1d6cfa8
      size: 820789
    - path: scripts/fit.py
      hash: md5
      md5: 39dcdf629de6e231eca7fbec9dbf0671
      size: 2040
    params:
      params.yaml:
        C: 1
        index_col: customer_id
        one_hot_drop: if_binary
        penalty: l2
        target_col: target
    outs:
    - path: models/fitted_model.pkl
      hash: md5
      md5: 6c7379a200d1c87e1b4178993057120a
      size: 11358
      cloud:
        my_storage:
          etag: 6c7379a200d1c87e1b4178993057120a
          version_id: 000615A9663C0F85
  evaluate_model:
    cmd: python scripts/evaluate.py
    deps:
    - path: models/fitted_model.pkl
      hash: md5
      md5: 6c7379a200d1c87e1b4178993057120a
      size: 11358
    - path: scripts/evaluate.py
      hash: md5
      md5: 8571b6e0c7f1b06475e2830f9dfd1c72
      size: 1564
    params:
      params.yaml:
        index_col: customer_id
        metrics:
        - f1
        - roc_auc
        n_jobs: -1
        n_splits: 5
        target_col: target
    outs:
    - path: cv_results/cv_res.json
      hash: md5
      md5: 64fc1180a3a1d67e64423c7af632112e
      size: 95
      cloud:
        my_storage:
          etag: 64fc1180a3a1d67e64423c7af632112e
          version_id: 000615A9663BB8F2
